<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng C·ª• T√≠nh Ph√≠ Tr·∫£ G√≥p ƒêi·ªán M·∫∑t Tr·ªùi - Qu·ªπ ƒê·∫ßu T∆∞ Stride</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .contact-info {
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .contact-info span {
            font-weight: bold;
            color: #667eea;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            flex: 1;
            min-width: 150px;
        }

        .tab-btn:hover {
            background: #e0e0e0;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .tab-content.active {
            display: block;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group .note {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        .result-section {
            margin-top: 30px;
        }

        .result-section h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        tr:hover {
            background: #e3f2fd;
        }

        .highlight {
            background: #fff3cd !important;
            font-weight: bold;
        }

        .btn {
            padding: 12px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .info-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .info-box ul {
            margin-left: 20px;
        }

        .info-box li {
            margin-bottom: 5px;
            color: #555;
        }

        .cskn-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .cskn-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .cskn-card h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .cskn-card .value {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
        }

        .footer {
            margin-top: 40px;
            text-align: center;
            color: white;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üí∞ C√îNG C·ª§ T√çNH PH√ç TR·∫¢ CH·∫¨M ƒêI·ªÜN M·∫∂T TR·ªúI</h1>
            <p class="subtitle">Qu·ªπ ƒê·∫ßu T∆∞ Stride - C·∫≠p nh·∫≠t ng√†y 03/11/2025</p>
            <div class="contact-info">
                <span>üìû Hotline:</span> 0915 812 340 - 0973 209 097 | 
                <span>üìß Ph·ª• tr√°ch:</span> Vi·ªát An - Stride
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('tab1')">G√≥i D∆∞·ªõi 800 Tri·ªáu</button>
            <button class="tab-btn" onclick="switchTab('tab2')">G√≥i Tr√™n 800 Tri·ªáu</button>
            <button class="tab-btn" onclick="switchTab('tab3')">C√¥ng Su·∫•t Khuy·∫øn Ngh·ªã</button>
            <button class="tab-btn" onclick="switchTab('tab4')">B·∫£ng Gi√° ƒêi·ªán</button>
        </div>

        <!-- Tab 1: G√≥i D∆∞·ªõi 800 Tri·ªáu -->
        <div id="tab1" class="tab-content active">
            <div class="input-section">
                <h3>üìù Nh·∫≠p Th√¥ng Tin C√¥ng Tr√¨nh</h3>
                <div class="input-grid">
                    <div class="input-group">
                        <label for="totalValue1">T·ªïng Gi√° Tr·ªã C√¥ng Tr√¨nh (VND)</label>
                        <input type="number" id="totalValue1" value="125000000" min="87500000" oninput="calculatePackage1()">
                        <div class="note">T·ªëi thi·ªÉu: 87.500.000ƒë</div>
                    </div>
                    <div class="input-group">
                        <label for="downPayment1">T·ªâ L·ªá Tr·∫£ Tr∆∞·ªõc (%)</label>
                        <input type="number" id="downPayment1" value="20" min="20" max="40" oninput="calculatePackage1()">
                        <div class="note">T·ªëi thi·ªÉu 20%, t·ªëi ƒëa 40%</div>
                    </div>
                    <div class="input-group">
                        <label for="pricePerKwp1">Gi√° Trung B√¨nh (VND/kWp)</label>
                        <input type="number" id="pricePerKwp1" value="8333333" readonly>
                    </div>
                    <div class="input-group">
                        <label for="systemCapacity1">C√¥ng Su·∫•t H·ªá Th·ªëng (kWp)</label>
                        <input type="number" id="systemCapacity1" step="0.01" readonly>
                    </div>
                </div>
            </div>

            <div class="result-section">
                <h3>üìä B·∫£ng T√≠nh Ph√≠ Tr·∫£ G√≥p</h3>
                <table id="resultTable1">
                    <thead>
                        <tr>
                            <th>K·ª≥ H·∫°n</th>
                            <th>Ph√≠ D·ªãch V·ª• Ban ƒê·∫ßu (3%)</th>
                            <th>Ph√≠ H√†ng Th√°ng</th>
                            <th>S·ªë Ti·ªÅn Gi·∫£i Ng√¢n</th>
                            <th>Ti·ªÅn Tr·∫£ M·ªói Th√°ng</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>6 th√°ng</td>
                            <td id="fee6m">3.240.000 ƒë</td>
                            <td>0%</td>
                            <td id="loan6m">100.000.000 ƒë</td>
                            <td id="monthly6m">16.666.667 ƒë</td>
                        </tr>
                        <tr>
                            <td>12 th√°ng</td>
                            <td id="fee12m">3.240.000 ƒë</td>
                            <td>0,75%</td>
                            <td id="loan12m">100.000.000 ƒë</td>
                            <td id="monthly12m">9.158.333 ƒë</td>
                        </tr>
                        <tr>
                            <td>24 th√°ng</td>
                            <td id="fee24m">3.240.000 ƒë</td>
                            <td>0,85%</td>
                            <td id="loan24m">100.000.000 ƒë</td>
                            <td id="monthly24m">5.008.333 ƒë</td>
                        </tr>
                        <tr>
                            <td>48 th√°ng</td>
                            <td id="fee48m">3.240.000 ƒë</td>
                            <td>1,00%</td>
                            <td id="loan48m">100.000.000 ƒë</td>
                            <td id="monthly48m">3.183.333 ƒë</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="info-box">
                <h4>üìù H·ªì S∆° C·∫ßn Thi·∫øt</h4>
                <ul>
                    <li><strong>Kh√°ch h√†ng c√° nh√¢n:</strong> H√¨nh cƒÉn c∆∞·ªõc, H√¨nh s·ªï ƒë·ªè/H·ª£p ƒë·ªìng thu√™</li>
                    <li><strong>Kh√°ch h√†ng c√¥ng ty:</strong> B·ªï sung ƒêƒÉng k√Ω kinh doanh (ƒë·ªÉ xu·∫•t h√≥a ƒë∆°n)</li>
                </ul>
            </div>

            <div class="info-box">
                <h4>‚úÖ Cam K·∫øt C·ªßa Stride</h4>
                <ul>
                    <li>Kh√°ch h√†ng ƒë∆∞·ª£c ki·ªÉm tra ƒë·ªôc l·∫≠p tr∆∞·ªõc khi nghi·ªám thu c√¥ng tr√¨nh</li>
                    <li>H·ªá th·ªëng ƒë∆∞·ª£c mua b·∫£o hi·ªÉm trong su·ªët qu√° tr√¨nh tr·∫£ g√≥p</li>
                    <li>Ki·ªÉm tra ƒë·ªãnh k·ª≥ 1 nƒÉm/l·∫ßn cho h·ªá th·ªëng</li>
                    <li>T·∫•t to√°n tr∆∞·ªõc h·∫°n ph√≠ ph·∫°t = 0% (Ch·ªâ c·∫ßn tr·∫£ 1 nƒÉm ƒë·∫ßu)</li>
                    <li>Ph√≠ th·∫©m ƒë·ªãnh ƒë∆∞·ª£c tr·∫£ l·∫°i n·∫øu kh√¥ng duy·ªát tr·∫£ g√≥p</li>
                </ul>
            </div>
        </div>

        <!-- Tab 2: G√≥i Tr√™n 800 Tri·ªáu -->
        <div id="tab2" class="tab-content">
            <div class="input-section">
                <h3>üìù Nh·∫≠p Th√¥ng Tin C√¥ng Tr√¨nh L·ªõn</h3>
                <div class="input-grid">
                    <div class="input-group">
                        <label for="totalValue2">T·ªïng Gi√° Tr·ªã C√¥ng Tr√¨nh (VND)</label>
                        <input type="number" id="totalValue2" value="1600000000" min="800000000" oninput="calculatePackage2()">
                        <div class="note">T·ªëi thi·ªÉu: 800.000.000ƒë</div>
                    </div>
                    <div class="input-group">
                        <label for="downPayment2">T·ªâ L·ªá Tr·∫£ Tr∆∞·ªõc (%)</label>
                        <input type="number" id="downPayment2" value="0" min="0" max="20" oninput="calculatePackage2()">
                        <div class="note">0% cho c√¥ng ty ƒë·ªß ƒëi·ªÅu ki·ªán</div>
                    </div>
                    <div class="input-group">
                        <label for="pricePerKwp2">Gi√° Trung B√¨nh (VND/kWp)</label>
                        <input type="number" id="pricePerKwp2" value="8000000" readonly>
                    </div>
                    <div class="input-group">
                        <label for="systemCapacity2">C√¥ng Su·∫•t H·ªá Th·ªëng (kWp)</label>
                        <input type="number" id="systemCapacity2" step="0.01" readonly>
                    </div>
                </div>
            </div>

            <div class="result-section">
                <h3>üìä B·∫£ng T√≠nh Ph√≠ Tr·∫£ G√≥p - G√≥i L·ªõn</h3>
                <table id="resultTable2">
                    <thead>
                        <tr>
                            <th>K·ª≥ H·∫°n</th>
                            <th>Ph√≠ D·ªãch V·ª• Ban ƒê·∫ßu (3%)</th>
                            <th>Ph√≠ H√†ng Th√°ng</th>
                            <th>S·ªë Ti·ªÅn Gi·∫£i Ng√¢n</th>
                            <th>Ti·ªÅn Tr·∫£ M·ªói Th√°ng</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>12 th√°ng</td>
                            <td id="fee12m_2">48.000.000 ƒë</td>
                            <td>0,80%</td>
                            <td id="loan12m_2">1.600.000.000 ƒë</td>
                            <td id="monthly12m_2">146.133.333 ƒë</td>
                        </tr>
                        <tr>
                            <td>24 th√°ng</td>
                            <td id="fee24m_2">48.000.000 ƒë</td>
                            <td>0,90%</td>
                            <td id="loan24m_2">1.600.000.000 ƒë</td>
                            <td id="monthly24m_2">78.666.667 ƒë</td>
                        </tr>
                        <tr>
                            <td>48 th√°ng</td>
                            <td id="fee48m_2">48.000.000 ƒë</td>
                            <td>1,00%</td>
                            <td id="loan48m_2">1.600.000.000 ƒë</td>
                            <td id="monthly48m_2">41.333.333 ƒë</td>
                        </tr>
                        <tr>
                            <td>60 th√°ng</td>
                            <td id="fee60m_2">48.000.000 ƒë</td>
                            <td>1,10%</td>
                            <td id="loan60m_2">1.600.000.000 ƒë</td>
                            <td id="monthly60m_2">34.266.667 ƒë</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="info-box">
                <h4>üìù ƒêi·ªÅu Ki·ªán Vay 100% Gi√° Tr·ªã C√¥ng Tr√¨nh</h4>
                <ul>
                    <li>Kh√°ch h√†ng l√† c√¥ng ty, th√†nh l·∫≠p tr√™n 5 nƒÉm</li>
                    <li>B√°o c√°o t√†i ch√≠nh: Doanh thu 3 nƒÉm TB tr√™n 25 t·ªâ, kh√¥ng l·ªó</li>
                    <li>T·ªïng gi√° tr·ªã gi·∫£i ng√¢n tr√™n 800 tri·ªáu</li>
                    <li>Gi√° trung b√¨nh d∆∞·ªõi 9 tri·ªáu/kWp</li>
                </ul>
            </div>

            <div class="info-box">
                <h4>üìÑ H·ªì S∆° C√¥ng Ty</h4>
                <ul>
                    <li>H√¨nh cƒÉn c∆∞·ªõc, ƒêƒÉng k√Ω kinh doanh</li>
                    <li>H√¨nh s·ªï ƒë·ªè/H·ª£p ƒë·ªìng thu√™</li>
                    <li>BCTC 3 nƒÉm, BC thu·∫ø 6 th√°ng g·∫ßn nh·∫•t</li>
                    <li>L·ªãch s·ª≠ giao d·ªãch t√†i kho·∫£n c√¥ng ty: 6 th√°ng g·∫ßn nh·∫•t</li>
                    <li>H√≥a ƒë∆°n ti·ªÅn ƒëi·ªán 6 th√°ng g·∫ßn nh·∫•t</li>
                    <li>Bi√™n b·∫£n Ki·ªÉm tra PCCC 12 th√°ng g·∫ßn nh·∫•t</li>
                </ul>
            </div>
        </div>

        <!-- Tab 3: C√¥ng Su·∫•t Khuy·∫øn Ngh·ªã -->
        <div id="tab3" class="tab-content">
            <div class="input-section">
                <h3>‚ö° T√≠nh C√¥ng Su·∫•t Khuy·∫øn Ngh·ªã</h3>
                <div class="input-grid">
                    <div class="input-group">
                        <label for="monthlyElectricity">S·ªë ƒêi·ªán Ti√™u Th·ª• M·ªói Th√°ng (kWh)</label>
                        <input type="number" id="monthlyElectricity" value="600" min="100" oninput="calculateCSKN()">
                        <div class="note">Nh·∫≠p s·ªë ƒëi·ªán trung b√¨nh h√†ng th√°ng</div>
                    </div>
                    <div class="input-group">
                        <label for="region">Khu V·ª±c</label>
                        <select id="region" onchange="calculateCSKN()">
                            <option value="north">Mi·ªÅn B·∫Øc (2.8 gi·ªù n·∫Øng)</option>
                            <option value="central" selected>Mi·ªÅn Trung/Nam (4 gi·ªù n·∫Øng)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="usageType">Lo·∫°i H√¨nh S·ª≠ D·ª•ng</label>
                        <select id="usageType" onchange="calculateCSKN()">
                            <option value="household">Sinh Ho·∫°t</option>
                            <option value="business" selected>Kinh Doanh</option>
                            <option value="production">S·∫£n Xu·∫•t</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="cskn-grid">
                <div class="cskn-card">
                    <h4>üåû C√¥ng Su·∫•t Khuy·∫øn Ngh·ªã</h4>
                    <div class="value" id="recommendedCapacity">2 kWp</div>
                    <div class="note">Ph√π h·ª£p v·ªõi nhu c·∫ßu s·ª≠ d·ª•ng</div>
                </div>
                <div class="cskn-card">
                    <h4>üí∞ Gi√° Tr·ªã C√¥ng Tr√¨nh</h4>
                    <div class="value" id="projectValue">16.000.000 ƒë</div>
                    <div class="note">∆Ø·ªõc t√≠nh theo gi√° th·ªã tr∆∞·ªùng</div>
                </div>
                <div class="cskn-card">
                    <h4>‚ö° Ti·∫øt Ki·ªám H√†ng Th√°ng</h4>
                    <div class="value" id="monthlySaving">~1.200.000 ƒë</div>
                    <div class="note">D·ª±a tr√™n gi√° ƒëi·ªán hi·ªán t·∫°i</div>
                </div>
            </div>

            <div class="info-box">
                <h4>üìä C√¥ng Su·∫•t T·ªëi ƒêa C√≥ Th·ªÉ L·∫Øp</h4>
                <p id="maxCapacity">20.0 kWp</p>
            </div>
        </div>

        <!-- Tab 4: B·∫£ng Gi√° ƒêi·ªán -->
        <div id="tab4" class="tab-content">
            <h3>üí∞ B·∫£ng Gi√° ƒêi·ªán (C·∫≠p nh·∫≠t 10/05/2025)</h3>
            
            <div class="input-section">
                <h4>üè† ƒêi·ªán Sinh Ho·∫°t (6 B·∫≠c)</h4>
                <table>
                    <thead>
                        <tr>
                            <th>B·∫≠c</th>
                            <th>kWh</th>
                            <th>Gi√° (ƒë/kWh)</th>
                            <th>Th√†nh Ti·ªÅn (VAT 10%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>B·∫≠c 1</td><td>0-50</td><td>1.984</td><td>109.120 ƒë</td></tr>
                        <tr><td>B·∫≠c 2</td><td>51-100</td><td>2.050</td><td>112.750 ƒë</td></tr>
                        <tr><td>B·∫≠c 3</td><td>101-200</td><td>2.380</td><td>261.800 ƒë</td></tr>
                        <tr><td>B·∫≠c 4</td><td>201-300</td><td>2.998</td><td>329.780 ƒë</td></tr>
                        <tr><td>B·∫≠c 5</td><td>301-400</td><td>3.350</td><td>368.500 ƒë</td></tr>
                        <tr><td>B·∫≠c 6</td><td>T·ª´ 401 tr·ªü l√™n</td><td>3.460</td><td>30.828.600 ƒë</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="input-section">
                <h4>üè¢ ƒêi·ªán Kinh Doanh (C·∫•p ƒëi·ªán √°p t·ª´ 6 kV ƒë·∫øn d∆∞·ªõi 22 kV)</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Khung Gi·ªù</th>
                            <th>Gi√° (ƒë/kWh)</th>
                            <th>T·ª∑ L·ªá</th>
                            <th>Gi√° TB (VAT 10%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Gi·ªù b√¨nh th∆∞·ªùng</td><td>3.108</td><td>75%</td><td>2.331 ƒë</td></tr>
                        <tr><td>Gi·ªù th·∫•p ƒëi·ªÉm</td><td>1.829</td><td>-</td><td>3.922 ƒë</td></tr>
                        <tr><td>Gi·ªù cao ƒëi·ªÉm</td><td>5.202</td><td>25%</td><td>1.301 ƒë</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="input-section">
                <h4>üè≠ ƒêi·ªán S·∫£n Xu·∫•t (C·∫•p ƒëi·ªán √°p t·ª´ 22 kV ƒë·∫øn d∆∞·ªõi 110 kV)</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Khung Gi·ªù</th>
                            <th>Gi√° (ƒë/kWh)</th>
                            <th>T·ª∑ L·ªá</th>
                            <th>Gi√° TB (VAT 10%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Gi·ªù b√¨nh th∆∞·ªùng</td><td>1.833</td><td>75%</td><td>1.375 ƒë</td></tr>
                        <tr><td>Gi·ªù th·∫•p ƒëi·ªÉm</td><td>1.190</td><td>-</td><td>2.402 ƒë</td></tr>
                        <tr><td>Gi·ªù cao ƒëi·ªÉm</td><td>3.398</td><td>25%</td><td>850 ƒë</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="info-box">
                <h4>‚è∞ Khung Gi·ªù Cao ƒêi·ªÉm</h4>
                <p>T·ª´ th·ª© 2 - th·ª© 7 g·ªìm c√°c khung gi·ªù: T·ª´ 09h30 - 11h30, 17h00 - 20h00</p>
                <p>Ch·ªß nh·∫≠t: kh√¥ng c√≥ gi·ªù cao ƒëi·ªÉm</p>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2025 Qu·ªπ ƒê·∫ßu T∆∞ Stride - Chuy√™n Tr·∫£ G√≥p ƒêi·ªán M·∫∑t Tr·ªùi</p>
            <p>Website: <a href="http://www.stride.vn" style="color: white; text-decoration: underline;">www.stride.vn</a></p>
        </div>
    </div>

    <script>
        // Switch tabs
        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            
            // Add active to clicked button
            event.target.classList.add('active');
            
            // Recalculate based on active tab
            if(tabId === 'tab1') {
                calculatePackage1();
            } else if(tabId === 'tab2') {
                calculatePackage2();
            } else if(tabId === 'tab3') {
                calculateCSKN();
            }
        }

        // Calculate Package 1 (Under 800 million)
        function calculatePackage1() {
            const totalValue = parseFloat(document.getElementById('totalValue1').value) || 0;
            const downPaymentPercent = parseFloat(document.getElementById('downPayment1').value) || 20;
            
            if(totalValue < 87500000) {
                alert('T·ªïng gi√° tr·ªã c√¥ng tr√¨nh t·ªëi thi·ªÉu l√† 87.500.000ƒë');
                document.getElementById('totalValue1').value = 87500000;
                return;
            }
            
            if(downPaymentPercent < 20 || downPaymentPercent > 40) {
                alert('T·ªâ l·ªá tr·∫£ tr∆∞·ªõc t·ª´ 20% ƒë·∫øn 40%');
                document.getElementById('downPayment1').value = 20;
                return;
            }
            
            const downPayment = totalValue * (downPaymentPercent / 100);
            const loanAmount = totalValue - downPayment;
            const systemCapacity = loanAmount / 8333333;
            
            // Update inputs
            document.getElementById('systemCapacity1').value = systemCapacity.toFixed(2);
            document.getElementById('pricePerKwp1').value = Math.round(totalValue / systemCapacity);
            
            // Calculate fees
            const initialFee = loanAmount * 0.03;
            
            // Update table
            document.getElementById('fee6m').textContent = formatCurrency(initialFee);
            document.getElementById('fee12m').textContent = formatCurrency(initialFee);
            document.getElementById('fee24m').textContent = formatCurrency(initialFee);
            document.getElementById('fee48m').textContent = formatCurrency(initialFee);
            
            document.getElementById('loan6m').textContent = formatCurrency(loanAmount);
            document.getElementById('loan12m').textContent = formatCurrency(loanAmount);
            document.getElementById('loan24m').textContent = formatCurrency(loanAmount);
            document.getElementById('loan48m').textContent = formatCurrency(loanAmount);
            
            // Calculate monthly payments
            const monthly6m = loanAmount / 6;
            const monthly12m = (loanAmount / 12) + (loanAmount * 0.0075);
            const monthly24m = (loanAmount / 24) + (loanAmount * 0.0085);
            const monthly48m = (loanAmount / 48) + (loanAmount * 0.01);
            
            document.getElementById('monthly6m').textContent = formatCurrency(monthly6m);
            document.getElementById('monthly12m').textContent = formatCurrency(monthly12m);
            document.getElementById('monthly24m').textContent = formatCurrency(monthly24m);
            document.getElementById('monthly48m').textContent = formatCurrency(monthly48m);
        }

        // Calculate Package 2 (Over 800 million)
        function calculatePackage2() {
            const totalValue = parseFloat(document.getElementById('totalValue2').value) || 0;
            const downPaymentPercent = parseFloat(document.getElementById('downPayment2').value) || 0;
            
            if(totalValue < 800000000) {
                alert('T·ªïng gi√° tr·ªã c√¥ng tr√¨nh t·ªëi thi·ªÉu l√† 800.000.000ƒë');
                document.getElementById('totalValue2').value = 800000000;
                return;
            }
            
            if(downPaymentPercent > 20) {
                alert('T·ªâ l·ªá tr·∫£ tr∆∞·ªõc t·ªëi ƒëa 20%');
                document.getElementById('downPayment2').value = 20;
                return;
            }
            
            const downPayment = totalValue * (downPaymentPercent / 100);
            const loanAmount = totalValue - downPayment;
            const systemCapacity = loanAmount / 8000000;
            
            // Update inputs
            document.getElementById('systemCapacity2').value = systemCapacity.toFixed(2);
            document.getElementById('pricePerKwp2').value = Math.round(totalValue / systemCapacity);
            
            // Calculate fees
            const initialFee = loanAmount * 0.03;
            
            // Update table
            document.getElementById('fee12m_2').textContent = formatCurrency(initialFee);
            document.getElementById('fee24m_2').textContent = formatCurrency(initialFee);
            document.getElementById('fee48m_2').textContent = formatCurrency(initialFee);
            document.getElementById('fee60m_2').textContent = formatCurrency(initialFee);
            
            document.getElementById('loan12m_2').textContent = formatCurrency(loanAmount);
            document.getElementById('loan24m_2').textContent = formatCurrency(loanAmount);
            document.getElementById('loan48m_2').textContent = formatCurrency(loanAmount);
            document.getElementById('loan60m_2').textContent = formatCurrency(loanAmount);
            
            // Calculate monthly payments
            const monthly12m = (loanAmount / 12) + (loanAmount * 0.008);
            const monthly24m = (loanAmount / 24) + (loanAmount * 0.009);
            const monthly48m = (loanAmount / 48) + (loanAmount * 0.01);
            const monthly60m = (loanAmount / 60) + (loanAmount * 0.011);
            
            document.getElementById('monthly12m_2').textContent = formatCurrency(monthly12m);
            document.getElementById('monthly24m_2').textContent = formatCurrency(monthly24m);
            document.getElementById('monthly48m_2').textContent = formatCurrency(monthly48m);
            document.getElementById('monthly60m_2').textContent = formatCurrency(monthly60m);
        }

        // Calculate Recommended Capacity
        function calculateCSKN() {
            const monthlyElectricity = parseFloat(document.getElementById('monthlyElectricity').value) || 600;
            const region = document.getElementById('region').value;
            const usageType = document.getElementById('usageType').value;
            
            // Hours of sunlight
            const sunHours = region === 'north' ? 2.8 : 4;
            
            // Calculate daily consumption
            const dailyElectricity = monthlyElectricity / 30;
            
            // Calculate recommended capacity
            const recommendedCapacity = dailyElectricity / sunHours;
            
            // Calculate max capacity (10x recommended)
            const maxCapacity = recommendedCapacity * 10;
            
            // Calculate project value (8-11 million/kWp)
            const avgPricePerKwp = usageType === 'household' ? 9000000 : 
                                  usageType === 'business' ? 8000000 : 7000000;
            const projectValue = recommendedCapacity * avgPricePerKwp;
            
            // Calculate monthly saving (assume 80% of electricity cost)
            const electricityPrice = usageType === 'household' ? 2500 : 
                                    usageType === 'business' ? 3000 : 2000;
            const monthlySaving = monthlyElectricity * electricityPrice * 0.8;
            
            // Update display
            document.getElementById('recommendedCapacity').textContent = recommendedCapacity.toFixed(1) + ' kWp';
            document.getElementById('projectValue').textContent = formatCurrency(projectValue);
            document.getElementById('monthlySaving').textContent = '~' + formatCurrency(monthlySaving);
            document.getElementById('maxCapacity').textContent = maxCapacity.toFixed(1) + ' kWp (S·ªë ƒëi·ªán d√πng 1 ng√†y: ' + dailyElectricity.toFixed(0) + ' kWh)';
        }

        // Format currency
        function formatCurrency(amount) {
            return amount.toLocaleString('vi-VN') + ' ƒë';
        }

        // Initialize calculations
        window.onload = function() {
            calculatePackage1();
            calculatePackage2();
            calculateCSKN();
        }
    </script>
</body>
</html>