<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, viewport-fit=cover" />
    <meta name="DC.language" content="scheme=utf-8 content=vi" />
    <meta name="keywords" content="docs-tech" />
    <meta name="description" content="Docs Tech">
    <title>Danh s√°ch URL theo nh√≥m</title>

    <link rel="manifest" href="/manifest.json">

    <meta property="fb:app_id" content="975082742861467" />
    <meta property="fb:admins" content="100003641458984" />
    <meta name="author" content="nhquydev.net" />
    <meta name="keywords" content="docstech" />

    <link rel="icon" href="https://cdn-s3-001.quyit.id.vn/gitbook/blogs/logo_nqdev_512x512.png" sizes="32x32" />
    <link rel="icon" href="https://cdn-s3-001.quyit.id.vn/gitbook/blogs/logo_nqdev_512x512.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="https://cdn-s3-001.quyit.id.vn/gitbook/blogs/logo_nqdev_512x512.png" />
    <meta name="msapplication-TileImage" content="https://cdn-s3-001.quyit.id.vn/gitbook/blogs/logo_nqdev_512x512.png" />

    <!-- Bootstrap CSS -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap JS (th√™m jQuery n·∫øu d√πng) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Th√™m Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.3/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    <style type="text/css" media="screen">
      body,
      html {
        height: 100%;
        margin: 0;
      }

      iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      .sidebar {
        height: 100vh;
        overflow-y: auto;
        border-right: 1px solid #ddd;
      }

      .group-title {
        font-weight: bold;
        margin-top: 20px;
        margin-bottom: 10px;
        cursor: pointer;
        color: #555;
        font-size: 1rem;
        display: flex;
        align-items: center;
        user-select: none;
      }

      .group-title .arrow {
        margin-left: auto;
        transition: transform 0.3s ease;
        font-size: 0.9rem;
      }

      .group-title.expanded .arrow {
        transform: rotate(180deg);
      }

      .list-group-item.active {
        font-weight: bold;
        background-color: #0d6efd;
        color: white;
      }

      /* Animation collapse */
      .collapse-container {
        overflow: hidden;
        transition: max-height 0.4s ease;
        max-height: 1000px;
        /* open state */
      }

      .collapse-container.collapsing {
        max-height: 0;
      }

      .container-fluid {
        max-height: 100vh !important;
        max-width: 100vw !important;
        overflow: auto !important;
      }
    </style>

    <style type="text/css">
      /* T√πy ch·ªânh m√†u n·ªÅn v√† vi·ªÅn c·ªßa tooltip */
      .tooltip-inner {
        background-color: #4CAF50;
        /* M√†u n·ªÅn c·ªßa tooltip */
        color: white;
        /* M√†u ch·ªØ */
        font-size: 14px;
        /* K√≠ch th∆∞·ªõc ch·ªØ */
        border-radius: 8px;
        /* Bo tr√≤n vi·ªÅn tooltip */
        padding: 10px 15px;
        /* Padding n·ªôi dung */
      }

      /* T√πy ch·ªânh vi·ªÅn c·ªßa tooltip */
      .tooltip-arrow {
        border-top-color: #4CAF50;
        /* M√†u vi·ªÅn c·ªßa tooltip */
      }

      /* T√πy ch·ªânh khi hover v√†o tooltip */
      .tooltip-inner:hover {
        background-color: #45a049;
        /* M√†u n·ªÅn khi hover v√†o tooltip */
      }
    </style>
  </head>

  <body>
    <div class="container-fluid h-100">
      <div class="row h-100">
        <!-- Sidebar -->
        <div class="col-md-3 sidebar p-3 bg-light">
          <h5 class="mb-3">üìÑ Danh s√°ch trang</h5>
          <input type="text" id="search" class="form-control mb-3" placeholder="T√¨m ki·∫øm...">
          <div id="url-list"></div>
        </div>

        <!-- Main content with reload button -->
        <div class="col-md-9 p-0">
          <div class="d-flex justify-content-end align-items-center p-2 border-bottom bg-light">
            <button id="reload-btn" class="btn btn-outline-primary btn-sm" title="T·∫£i l·∫°i khung">
              <i class="fas fa-sync-alt"></i> T·∫£i l·∫°i
            </button>
          </div>
          <iframe id="content-frame" sandbox="allow-scripts allow-same-origin" src=""></iframe>
        </div>
      </div>
    </div>

    <!-- Import root-urls.js -->
    <script type="text/javascript">
      // T·∫°o v√† th√™m script ƒë·ªông v√†o trang, k√®m theo timestamp ƒë·ªÉ tr√°nh cache
      const script = document.createElement('script');
      script.src = 'root-urls.js?t=' + new Date().getTime();

      // Sau khi script ƒë∆∞·ª£c t·∫£i xong, th·ª±c hi·ªán renderList
      script.onload = function () {
        if (typeof urls !== 'undefined') {
          // Initial render
          renderList(); // G·ªçi renderList sau khi urls ƒë√£ c√≥ gi√° tr·ªã
        } else {
          console.error('urls is not defined in root-urls.js');
        }
      };

      document.head.appendChild(script);
    </script>

    <!-- Script -->
    <script type="text/javascript">
      const urlList = document.getElementById('url-list');
      const iframe = document.getElementById('content-frame');
      const searchInput = document.getElementById('search');

      let allLinkElements = [];

      function renderList(filter = '') {
        urlList.innerHTML = '';
        allLinkElements = [];

        urls.forEach((group, groupIndex) => {
          const filteredLinks = group.links.filter(link =>
            link.name.toLowerCase().includes(filter.toLowerCase())
          );

          if (filteredLinks.length > 0) {
            // Group container
            const groupContainer = document.createElement('div');
            groupContainer.classList.add('mb-3');

            // Group title
            const groupTitle = document.createElement('div');
            groupTitle.id = `group-${group.group_id}`;
            groupTitle.className = 'group-title collapsed'; // expanded
            groupTitle.innerHTML = `${group.group}<span class="arrow">‚ñ≤</span>`;

            // Links container
            const linksContainer = document.createElement('div');
            // linksContainer.className = 'collapse-container collapsing';

            filteredLinks.forEach(link => {
              const linkItem = document.createElement('div');
              linkItem.className = 'list-group-item list-group-item-action';
              linkItem.style.cursor = 'pointer';
              linkItem.textContent = link.name;

              if (link.title) {
                linkItem.title = link.title;
              }

              if (link?.target === '_blank') {
                linkItem.addEventListener('click', () => {
                  window.open(link.path, link?.target ?? '_blank')
                });
              } else {
                linkItem.addEventListener('click', () => {
                  iframe.src = link.path;
                  localStorage.setItem('lastOpenedUrl', link.path);
                  document.querySelectorAll('.list-group-item').forEach(el => {
                    el.classList.remove('active');
                    el.textContent = el.dataset.originalName;
                  });
                  linkItem.classList.add('active');
                  linkItem.textContent = `üîµ ${linkItem.dataset.originalName}`;
                });
              }

              linkItem.dataset.originalName = link.name;
              linksContainer.appendChild(linkItem);
              allLinkElements.push({ element: linkItem, path: link.path });
            });

            // groupTitle.addEventListener('click', () => {
            //   const expanded = groupTitle.classList.contains('expanded');

            //   // ƒê√≥ng t·∫•t c·∫£ nh√≥m kh√°c tr∆∞·ªõc
            //   document.querySelectorAll('.group-title').forEach(title => {
            //     title.classList.remove('expanded');
            //     title.classList.add('collapsed');
            //   });
            //   document.querySelectorAll('.collapse-container').forEach(container => {
            //     container.classList.add('collapsing');
            //     container.style.maxHeight = '0';
            //   });

            //   if (!expanded) {
            //     // M·ªü nh√≥m ƒëang click
            //     groupTitle.classList.add('expanded');
            //     groupTitle.classList.remove('collapsed');

            //     linksContainer.classList.remove('collapsing');
            //     linksContainer.style.maxHeight = linksContainer.scrollHeight + 'px';
            //     setTimeout(() => {
            //       linksContainer.style.maxHeight = '1000px';
            //     }, 400);
            //   }
            // });

            groupContainer.appendChild(groupTitle);
            groupContainer.appendChild(linksContainer);
            urlList.appendChild(groupContainer);
          }
        });
      }

      searchInput.addEventListener('input', (e) => {
        renderList(e.target.value);
      });

      // Initial render
      // renderList();

      // Restore last opened URL
      window.addEventListener('DOMContentLoaded', () => {
        const lastOpened = localStorage.getItem('lastOpenedUrl');
        const matched = allLinkElements.find(item => item.path === lastOpened);
        if (matched) {
          iframe.src = matched.path;
          matched.element.classList.add('active');
          matched.element.textContent = `üîµ ${matched.element.dataset.originalName}`;
        } else if (allLinkElements.length > 0) {
          iframe.src = allLinkElements[0].path;
          allLinkElements[0].element.classList.add('active');
          allLinkElements[0].element.textContent = `üîµ ${allLinkElements[0].element.dataset.originalName}`;
        }

        // Set the height of the iframe to 100% of the viewport height
        setTimeout(() => {
          document.getElementById('group-common').click();

          // K√≠ch ho·∫°t tooltip cho t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ data-bs-toggle="tooltip"
          var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
          var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
          });
        }, 100);
      });

      document.getElementById('reload-btn').addEventListener('click', () => {
        const iframe = document.getElementById('content-frame');
        iframe.src = iframe.src;
      });
    </script>

  </body>

</html>